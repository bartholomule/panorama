
BUILD_TOP = .

include ${BUILD_TOP}/Makefile.vars

SRC_DIR = @srcdir@

DIRS = data \
       doc \
       hlapi \
       llapi \
       plugins \
       programs \
       scenes

all:
		@set -e; \
		for i in $(DIRS); do \
                  $(MAKE) -C $$i all; \
                done

install:        all installdirs
		@set -e; \
		for i in $(DIRS); do \
                  $(MAKE) -C $$i install; \
                done

clean:
		@set -e
		@for i in $(DIRS); do \
                  $(MAKE) -C $$i clean; \
                done

distclean:
		@set -e
		@for i in $(DIRS); do \
                  $(MAKE) -C $$i distclean; \
                done
		@rm -f ${SRC_DIR}/Makefile ${SRC_DIR}/Makefile.targets ${SRC_DIR}/Makefile.vars
		@rm -f ${SRC_DIR}/config.cache ${SRC_DIR}/config.log ${SRC_DIR}/config.status

installdirs:
		@echo Creating directories...
		@${BUILD_TOP}/mkinstalldirs ${TOP_DIR} ${BIN_DIR} ${LIB_DIR} ${DOC_DIR} \
                			    ${CONFIG_DIR} ${INCLUDE_DIR} ${PLUGIN_DIR}  \
                                            ${TEXTURE_DIR} ${SCENE_DIR}
